name = "myflix-backend"
main = "src/presentation/http/server.ts"
compatibility_date = "2024-06-15"

[env.dev]
vars = { ACCESS_JWKS_URL = "https://example.cloudflareaccess.com/cdn-cgi/access/certs", ACCESS_JWT_AUD = "myflix-dev" }

[[env.dev.d1_databases]]
binding = "DB"
database_name = "REPLACE_WITH_DEV_D1_NAME"
database_id = "REPLACE_WITH_DEV_D1_ID"
migrations_dir = "src/infrastructure/database/migrations"

[[env.dev.r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "myflix-dev-media"

[env.prod]
vars = { ACCESS_JWKS_URL = "https://example.cloudflareaccess.com/cdn-cgi/access/certs", ACCESS_JWT_AUD = "myflix-prod" }

[[env.prod.d1_databases]]
binding = "DB"
database_name = "REPLACE_WITH_PROD_D1_NAME"
database_id = "REPLACE_WITH_PROD_D1_ID"
migrations_dir = "src/infrastructure/database/migrations"

[[env.prod.r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "myflix-prod-media"
